{"remainingRequest":"/Users/yschoi/Desktop/workspace/yschoi/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yschoi/Desktop/workspace/yschoi/frontend/src/views/dashboard/pages/Project.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yschoi/Desktop/workspace/yschoi/frontend/src/views/dashboard/pages/Project.vue","mtime":1609929666674},{"path":"/Users/yschoi/Desktop/workspace/yschoi/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yschoi/Desktop/workspace/yschoi/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yschoi/Desktop/workspace/yschoi/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yschoi/Desktop/workspace/yschoi/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IGF4aW9zID0gcmVxdWlyZSgnYXhpb3MnKTsKY29uc3QgVnVlID0gcmVxdWlyZSgndnVlJyk7CnZhciBqc29uX2xpc3Q7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlByb2plY3RzIiwKICAvLyBkYXRhOiBmdW5jdGlvbiAoKXsKICAvLyAgIHJldHVybnsKICAvLyAgICAgbGlzdDpbJ2EnLCdiJ10sCiAgLy8gICB9OwogIC8vIH0KICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIG5hbWVzcGFjZURpYWxvZzogZmFsc2UsCiAgICAgIHNlbGVjdElkOiAnJywKICAgICAgcHJvamVjdEhlYWRlcnM6IFsKICAgICAgICB7dGV4dDogJ1Byb2plY3QgTmFtZScsIHZhbHVlOiAnbmFtZSd9LAogICAgICBdLAogICAgICBuYW1lc3BhY2VzSGVhZGVyczogWwogICAgICAgIHt0ZXh0OiAn7IOB7YOcJywgdmFsdWU6ICdzdGF0ZSd9LAogICAgICAgIHt0ZXh0OiAn64Sk7J6E7Iqk7Y6Y7J207IqkIOydtOumhCcsIHZhbHVlOiAnbmFtZSd9LAogICAgICAgIHt0ZXh0OiAn7IOd7ISx7Iuc6rCEJywgdmFsdWU6ICdjcmVhdGVkJ30sCiAgICAgIF0sCiAgICAgIHByb2plY3RzOiBbXSwKICAgICAgbmFtZXNwYWNlczogW10sCiAgICAgIGVkaXRUYWJsZTp7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgcHJvamVjdElkOiAnJywKICAgICAgfSwKICAgICAgY250OiAwLAogICAgfQogIH0sCiAgY3JlYXRlZCgpewogICAgdGhpcy5nZXRQcm9qZWN0cygpCiAgfSwKICBtZXRob2RzOnsKICAgIGNhdGFsb2dWaWV3KGl0ZW0pewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1NFVF9DUElEJyxpdGVtLmlkKQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2MvJytpdGVtLmlkKycvYXBwcycpCiAgICB9LAogICAgbmFtZXNwYWNlRGlhbG9nU2hvdyhkYXRhKXsKICAgICAgY29uc29sZS5sb2coZGF0YSkKICAgICAgdGhpcy5lZGl0VGFibGUucHJvamVjdElkID0gZGF0YS5pZAogICAgICB0aGlzLm5hbWVzcGFjZURpYWxvZyA9IHRydWUKICAgIH0sCiAgICBuYW1lc3BhY2VDcmVhdGUoKXsKICAgICAgbGV0IF9zZWxmID0gdGhpcwogICAgICB0aGlzLm5hbWVzcGFjZURpYWxvZyA9IGZhbHNlCiAgICAgIF9zZWxmLiRzdG9yZS5jb21taXQoIlNFVF9MT0FESU5HIiwgdHJ1ZSkKCiAgICAgIGxldCBuYW1lc3BhY2VEYXRhID0gewogICAgICAgIG5hbWU6IF9zZWxmLmVkaXRUYWJsZS5uYW1lLAogICAgICAgIHByb2plY3RJZDogX3NlbGYuZWRpdFRhYmxlLnByb2plY3RJZCwKICAgICAgICBjbHVzdGVySWQ6IF9zZWxmLiRzdG9yZS5zdGF0ZS5jbHVzdGVyRGV0YWlsSW5mby5pZCwKICAgICAgfQoKICAgICAgYXhpb3MucG9zdCgnL2FwaS9wcm9qZWN0cy9uYW1lc3BhY2VDcmVhdGUnLCBuYW1lc3BhY2VEYXRhCiAgICAgICkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKXsKICAgICAgICAgIF9zZWxmLiRzdG9yZS5jb21taXQoIlNFVF9MT0FESU5HIiwgZmFsc2UpCiAgICAgICAgfSwzMDAwKQogICAgICAgIF9zZWxmLmdldFByb2plY3RzKCkKCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcil7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpewoKICAgICAgfSk7CiAgICB9LAogICAgbmFtZXNwYWNlRGlhbG9nQ2xvc2UoKXsKICAgICAgdGhpcy5lZGl0VGFibGUubmFtZSA9ICcnCiAgICAgIHRoaXMubmFtZXNwYWNlRGlhbG9nID0gZmFsc2UKICAgIH0sCiAgICBnZXRQcm9qZWN0cygpewogICAgICBsZXQgX3NlbGYgPSB0aGlzOwogICAgICBfc2VsZi5jbnQgPSAwCiAgICAgIGF4aW9zLmdldCgnL2FwaS9wcm9qZWN0cy8nK19zZWxmLiRzdG9yZS5zdGF0ZS5jbHVzdGVyRGV0YWlsSW5mby5pZCx7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKXsKCiAgICAgICAgbGV0IGpzb25TdHIgPSBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKTsKICAgICAgICBsZXQganNvbiA9IEpTT04ucGFyc2UoanNvblN0cik7CgogICAgICAgIF9zZWxmLnByb2plY3RzID0ganNvbjsKCiAgICAgICAgZm9yIChsZXQgaT0wO2k8anNvbi5sZW5ndGg7aSsrKXsKICAgICAgICAgIC8vIF9zZWxmLm5hbWVzcGFjZXMucHVzaChbXSkKICAgICAgICB9CgogICAgICAgIGZvciAobGV0IG9iaiBvZiBfc2VsZi5wcm9qZWN0cykgewogICAgICAgICAgX3NlbGYubmFtZXNwYWNlcy5wdXNoKFtvYmpdKQogICAgICAgIH0KCiAgICAgICAgZm9yIChsZXQgW2luZGV4LCBvYmpdIG9mIF9zZWxmLnByb2plY3RzLmVudHJpZXMoKSkgewogICAgICAgICAgY29uc29sZS5sb2cob2JqKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGluZGV4KTsKICAgICAgICAgIF9zZWxmLmdldE5hbWVzcGFjZXMob2JqLmlkLCBpbmRleCkKICAgICAgICB9CgogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKXsKCiAgICAgIH0pOwogICAgfSwKICAgIGdldE5hbWVzcGFjZXMocHJvamVjdElkLCBpbmRleCl7CiAgICAgIGxldCBfc2VsZiA9IHRoaXMKICAgICAgYXhpb3MuZ2V0KCcvYXBpL3Byb2plY3RzL25hbWVzcGFjZXMvJytfc2VsZi4kc3RvcmUuc3RhdGUuY2x1c3RlckRldGFpbEluZm8uaWQrJy8nK3Byb2plY3RJZCx7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKXsKCiAgICAgICAgbGV0IGpzb25TdHIgPSBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKQogICAgICAgIGxldCBqc29uID0gSlNPTi5wYXJzZShqc29uU3RyKQoKICAgICAgICBjb25zb2xlLmxvZyhqc29uKQogICAgICAgIGNvbnNvbGUubG9nKGluZGV4KQogICAgICAgIF9zZWxmLm5hbWVzcGFjZXNbaW5kZXhdID0ganNvbgogICAgICAgIGZvciAobGV0IG9iaiBvZiBfc2VsZi5uYW1lc3BhY2VzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhvYmopOwogICAgICAgIH0KICAgICAgICBfc2VsZi5jbnQrKwoKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKXsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCl7CgogICAgICB9KTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Project.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Project.vue","sourceRoot":"src/views/dashboard/pages","sourcesContent":["<template>\n  <v-container\n    id=\"project\"\n    fluid\n    tag=\"section\"\n  >\n    <div v-for=\"(item,i) in projects\">\n      <v-card\n          class=\"mx-3\"\n          outlined\n      >\n        <div style=\"position: relative; width: 100%; height: 60px;\">\n          <span style=\"position: absolute; left: 2%; top: 30%;\">{{item.name}}</span>\n          <div style=\"position: absolute; right:7%; top:15%; white-space: nowrap;\">\n            <v-btn\n                color=\"primary\"\n                dark\n                class=\"mb-2\"\n                @click=\"catalogView(item)\"\n                style=\"\"\n            >\n              카탈로그 조회\n            </v-btn>\n            <v-btn\n                color=\"primary\"\n                dark\n                class=\"mb-2\"\n                @click=\"namespaceDialogShow(item)\"\n                style=\"margin-left: 10%;\"\n            >\n              네임스페이스 추가\n            </v-btn>\n          </div>\n        </div>\n\n        <v-data-table\n            :headers=\"projectHeaders\"\n            :items=\"null\"\n            hide-default-header\n            hide-default-footer\n            class=\"elevation-1\"\n        >\n        </v-data-table>\n        <v-data-table\n            v-if=\"cnt == projects.length\"\n            :headers=\"namespacesHeaders\"\n            :items=\"namespaces[i]\"\n            hide-default-footer\n            class=\"elevation-1\"\n        >\n        </v-data-table>\n      </v-card>\n\n      <br>\n    </div>\n    <v-dialog v-model=\"namespaceDialog\" max-width=\"600px\">\n      <v-card>\n        <v-card-title>\n          <span class=\"headline\">네임스페이스 추가</span>\n        </v-card-title>\n\n        <v-card-text>\n          <v-container>\n            <v-row>\n              <v-col\n                  cols=\"12\"\n                  sm=\"6\"\n                  md=\"4\"\n              >\n                <v-text-field\n                    v-model=\"editTable.name\"\n                    label=\"네임스페이스 이름\"\n                ></v-text-field>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-text>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n              color=\"blue darken-1\"\n              text\n              @click=\"namespaceCreate\"\n          >\n            Create\n          </v-btn>\n          <v-btn\n              color=\"blue darken-1\"\n              text\n              @click=\"namespaceDialogClose\"\n          >\n            Cancel\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nconst axios = require('axios');\nconst Vue = require('vue');\nvar json_list;\n\nexport default {\n  name: \"Projects\",\n  // data: function (){\n  //   return{\n  //     list:['a','b'],\n  //   };\n  // }\n  data () {\n    return {\n      namespaceDialog: false,\n      selectId: '',\n      projectHeaders: [\n        {text: 'Project Name', value: 'name'},\n      ],\n      namespacesHeaders: [\n        {text: '상태', value: 'state'},\n        {text: '네임스페이스 이름', value: 'name'},\n        {text: '생성시간', value: 'created'},\n      ],\n      projects: [],\n      namespaces: [],\n      editTable:{\n        name: '',\n        projectId: '',\n      },\n      cnt: 0,\n    }\n  },\n  created(){\n    this.getProjects()\n  },\n  methods:{\n    catalogView(item){\n      this.$store.commit('SET_CPID',item.id)\n      this.$router.push('/c/'+item.id+'/apps')\n    },\n    namespaceDialogShow(data){\n      console.log(data)\n      this.editTable.projectId = data.id\n      this.namespaceDialog = true\n    },\n    namespaceCreate(){\n      let _self = this\n      this.namespaceDialog = false\n      _self.$store.commit(\"SET_LOADING\", true)\n\n      let namespaceData = {\n        name: _self.editTable.name,\n        projectId: _self.editTable.projectId,\n        clusterId: _self.$store.state.clusterDetailInfo.id,\n      }\n\n      axios.post('/api/projects/namespaceCreate', namespaceData\n      ).then(function (response){\n        console.log(response.data)\n        setTimeout(function (){\n          _self.$store.commit(\"SET_LOADING\", false)\n        },3000)\n        _self.getProjects()\n\n      }).catch(function (error){\n        console.log(error);\n      }).finally(function (){\n\n      });\n    },\n    namespaceDialogClose(){\n      this.editTable.name = ''\n      this.namespaceDialog = false\n    },\n    getProjects(){\n      let _self = this;\n      _self.cnt = 0\n      axios.get('/api/projects/'+_self.$store.state.clusterDetailInfo.id,{\n      }).then(function (response){\n\n        let jsonStr = JSON.stringify(response.data);\n        let json = JSON.parse(jsonStr);\n\n        _self.projects = json;\n\n        for (let i=0;i<json.length;i++){\n          // _self.namespaces.push([])\n        }\n\n        for (let obj of _self.projects) {\n          _self.namespaces.push([obj])\n        }\n\n        for (let [index, obj] of _self.projects.entries()) {\n          console.log(obj);\n          console.log(index);\n          _self.getNamespaces(obj.id, index)\n        }\n\n      }).catch(function (error){\n        console.log(error);\n      }).finally(function (){\n\n      });\n    },\n    getNamespaces(projectId, index){\n      let _self = this\n      axios.get('/api/projects/namespaces/'+_self.$store.state.clusterDetailInfo.id+'/'+projectId,{\n      }).then(function (response){\n\n        let jsonStr = JSON.stringify(response.data)\n        let json = JSON.parse(jsonStr)\n\n        console.log(json)\n        console.log(index)\n        _self.namespaces[index] = json\n        for (let obj of _self.namespaces) {\n          console.log(obj);\n        }\n        _self.cnt++\n\n      }).catch(function (error){\n        console.log(error);\n      }).finally(function (){\n\n      });\n    }\n  }\n}\n</script>\n\n// const getProject = async () => {\n//   try {\n//     console.log('gg');\n//     return await axios.get('/api/cluster');\n//   }catch(error){\n//     console.error(error);\n//     console.log('error');\n//   }\n// };\n//\n// const projectList = async () => {\n//   const project = await getProject();\n//   console.log(project);\n//   if(project.data.message){\n//     console.log('');\n//   }\n//   return project;\n// };\n//\n//   export default {\n//     name: \"Cluster\",\n//     created(){\n//       var json = projectList();\n//       console.log(json);\n//     }\n//   }"]}]}